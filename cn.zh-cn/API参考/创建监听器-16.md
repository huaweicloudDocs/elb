# 创建监听器<a name="zh-cn_topic_0141008280"></a>

## 功能介绍<a name="zh-cn_topic_0096561542_zh-cn_topic_0049139642_section1462819"></a>

创建与负载均衡器绑定的监听器。

## URI<a name="zh-cn_topic_0096561542_zh-cn_topic_0049139642_section13165375"></a>

POST /v2/\{project\_id\}/elb/listeners

**表 1**  参数说明

<a name="zh-cn_topic_0096561532_table8859516183710"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561532_row1189415166379"><th class="cellrowborder" valign="top" width="25.847415258474154%" id="mcps1.2.5.1.1"><p id="zh-cn_topic_0096561532_p148945161379"><a name="zh-cn_topic_0096561532_p148945161379"></a><a name="zh-cn_topic_0096561532_p148945161379"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="14.54854514548545%" id="mcps1.2.5.1.2"><p id="zh-cn_topic_0096561532_p16894816103712"><a name="zh-cn_topic_0096561532_p16894816103712"></a><a name="zh-cn_topic_0096561532_p16894816103712"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.398760123987602%" id="mcps1.2.5.1.3"><p id="zh-cn_topic_0096561532_p98941716113710"><a name="zh-cn_topic_0096561532_p98941716113710"></a><a name="zh-cn_topic_0096561532_p98941716113710"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="47.205279472052794%" id="mcps1.2.5.1.4"><p id="zh-cn_topic_0096561532_p16894816113718"><a name="zh-cn_topic_0096561532_p16894816113718"></a><a name="zh-cn_topic_0096561532_p16894816113718"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1184910597469"><td class="cellrowborder" valign="top" width="25.847415258474154%" headers="mcps1.2.5.1.1 "><p id="p1989215461765"><a name="p1989215461765"></a><a name="p1989215461765"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="14.54854514548545%" headers="mcps1.2.5.1.2 "><p id="p1889919461969"><a name="p1889919461969"></a><a name="p1889919461969"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.398760123987602%" headers="mcps1.2.5.1.3 "><p id="p198984461761"><a name="p198984461761"></a><a name="p198984461761"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="47.205279472052794%" headers="mcps1.2.5.1.4 "><p id="p990674613615"><a name="p990674613615"></a><a name="p990674613615"></a>操作用户的项目ID。</p>
<p id="p8222164914610"><a name="p8222164914610"></a><a name="p8222164914610"></a>获取方法详见<a href="获取项目ID.md">获取项目ID</a>。</p>
</td>
</tr>
</tbody>
</table>

## 接口约束<a name="zh-cn_topic_0096561542_zh-cn_topic_0049139642_section51379511"></a>

-   只有管理员用户才能指定connection\_limit的值。
-   protocol参数只支持TCP、UDP、HTTP和TERMINATED\_HTTPS。

## 请求消息<a name="zh-cn_topic_0096561542_section112126467011"></a>

**表 2**  请求参数

<a name="table122881844161815"></a>
<table><thead align="left"><tr id="row1528814471819"><th class="cellrowborder" valign="top" width="21.63%" id="mcps1.2.5.1.1"><p id="p02881944101816"><a name="p02881944101816"></a><a name="p02881944101816"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="9.11%" id="mcps1.2.5.1.2"><p id="p9288104491819"><a name="p9288104491819"></a><a name="p9288104491819"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="15.25%" id="mcps1.2.5.1.3"><p id="p1628844491814"><a name="p1628844491814"></a><a name="p1628844491814"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="54.010000000000005%" id="mcps1.2.5.1.4"><p id="p112889445184"><a name="p112889445184"></a><a name="p112889445184"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row19289114471819"><td class="cellrowborder" valign="top" width="21.63%" headers="mcps1.2.5.1.1 "><p id="p14289344171817"><a name="p14289344171817"></a><a name="p14289344171817"></a>listener</p>
</td>
<td class="cellrowborder" valign="top" width="9.11%" headers="mcps1.2.5.1.2 "><p id="p1928964471819"><a name="p1928964471819"></a><a name="p1928964471819"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="15.25%" headers="mcps1.2.5.1.3 "><p id="p16385449172812"><a name="p16385449172812"></a><a name="p16385449172812"></a>Object</p>
</td>
<td class="cellrowborder" valign="top" width="54.010000000000005%" headers="mcps1.2.5.1.4 "><p id="p142892443189"><a name="p142892443189"></a><a name="p142892443189"></a>listener对象。详见<a href="#table3499100135410">表3</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 3**  listener字段说明

<a name="table3499100135410"></a>
<table><thead align="left"><tr id="row064317014542"><th class="cellrowborder" valign="top" width="28.749999999999996%" id="mcps1.2.5.1.1"><p id="p18643190205416"><a name="p18643190205416"></a><a name="p18643190205416"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="14.06%" id="mcps1.2.5.1.2"><p id="p1564318075420"><a name="p1564318075420"></a><a name="p1564318075420"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.23%" id="mcps1.2.5.1.3"><p id="p86431055413"><a name="p86431055413"></a><a name="p86431055413"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="44.96%" id="mcps1.2.5.1.4"><p id="p1664316014546"><a name="p1664316014546"></a><a name="p1664316014546"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row864310075414"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p16643140135418"><a name="p16643140135418"></a><a name="p16643140135418"></a>tenant_id</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p13644150165414"><a name="p13644150165414"></a><a name="p13644150165414"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p3643170135418"><a name="p3643170135418"></a><a name="p3643170135418"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p163001534134610"><a name="p163001534134610"></a><a name="p163001534134610"></a>监听器所在的项目ID。</p>
<p id="p190951915418"><a name="p190951915418"></a><a name="p190951915418"></a>获取方法详见<a href="获取项目ID.md">获取项目ID</a>。</p>
<p id="p1564410175417"><a name="p1564410175417"></a><a name="p1564410175417"></a>需要和token中的project_id一致。</p>
<p id="p1264211013318"><a name="p1264211013318"></a><a name="p1264211013318"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="row1964412016546"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p064410165412"><a name="p064410165412"></a><a name="p064410165412"></a>name</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p146444045415"><a name="p146444045415"></a><a name="p146444045415"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p46441102547"><a name="p46441102547"></a><a name="p46441102547"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p106444014545"><a name="p106444014545"></a><a name="p106444014545"></a>监听器名称。</p>
<p id="p34711018103311"><a name="p34711018103311"></a><a name="p34711018103311"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="row464412025415"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p06447018548"><a name="p06447018548"></a><a name="p06447018548"></a>description</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p56441504543"><a name="p56441504543"></a><a name="p56441504543"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p116441301547"><a name="p116441301547"></a><a name="p116441301547"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p206440012544"><a name="p206440012544"></a><a name="p206440012544"></a>监听器描述信息。</p>
<p id="p11558122016338"><a name="p11558122016338"></a><a name="p11558122016338"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="row196444065412"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p1644150175410"><a name="p1644150175410"></a><a name="p1644150175410"></a>protocol</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p462249153815"><a name="p462249153815"></a><a name="p462249153815"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p2644807540"><a name="p2644807540"></a><a name="p2644807540"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p1434418339294"><a name="p1434418339294"></a><a name="p1434418339294"></a>监听器的监听协议。</p>
<p id="p1342193518290"><a name="p1342193518290"></a><a name="p1342193518290"></a>取值范围：TCP、HTTP、UDP、TERMINATED_HTTPS。</p>
</td>
</tr>
<tr id="row12644103548"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p156445075418"><a name="p156445075418"></a><a name="p156445075418"></a>protocol_port</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p1064515019547"><a name="p1064515019547"></a><a name="p1064515019547"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p146441802549"><a name="p146441802549"></a><a name="p146441802549"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p1305737162912"><a name="p1305737162912"></a><a name="p1305737162912"></a>监听器的监听端口。</p>
<p id="p17184113813293"><a name="p17184113813293"></a><a name="p17184113813293"></a>取值范围：[1, 65535]。</p>
<div class="note" id="note283220448294"><a name="note283220448294"></a><a name="note283220448294"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p158337444299"><a name="p158337444299"></a><a name="p158337444299"></a>如果监听协议为UDP，端口号不支持4789。</p>
</div></div>
</td>
</tr>
<tr id="row106459010540"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p364512016547"><a name="p364512016547"></a><a name="p364512016547"></a>loadbalancer_id</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p136451407547"><a name="p136451407547"></a><a name="p136451407547"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p1634111417306"><a name="p1634111417306"></a><a name="p1634111417306"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p3645170135410"><a name="p3645170135410"></a><a name="p3645170135410"></a>监听器关联的负载均衡器 ID。</p>
</td>
</tr>
<tr id="row13645509545"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p6645120145417"><a name="p6645120145417"></a><a name="p6645120145417"></a>connection_limit</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p16573171183812"><a name="p16573171183812"></a><a name="p16573171183812"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p12645902548"><a name="p12645902548"></a><a name="p12645902548"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p35248213012"><a name="p35248213012"></a><a name="p35248213012"></a>监听器的最大连接数。</p>
<p id="p0590933306"><a name="p0590933306"></a><a name="p0590933306"></a>取值范围：[-1, 2147483647]。默认为-1，无限制。</p>
<p id="p176373514306"><a name="p176373514306"></a><a name="p176373514306"></a>该字段为预留字段，暂未启动。</p>
</td>
</tr>
<tr id="row1264500115411"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p8645708547"><a name="p8645708547"></a><a name="p8645708547"></a>admin_state_up</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p12390167113820"><a name="p12390167113820"></a><a name="p12390167113820"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p96457019548"><a name="p96457019548"></a><a name="p96457019548"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p4676198103013"><a name="p4676198103013"></a><a name="p4676198103013"></a>监听器的管理状态。</p>
<p id="p136141610163013"><a name="p136141610163013"></a><a name="p136141610163013"></a>该字段为预留字段，暂未启动。只支持设定为true。</p>
</td>
</tr>
<tr id="row92631030637"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p852915407320"><a name="p852915407320"></a><a name="p852915407320"></a>http2_enable</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p19530104019310"><a name="p19530104019310"></a><a name="p19530104019310"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p353015409313"><a name="p353015409313"></a><a name="p353015409313"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p427111614307"><a name="p427111614307"></a><a name="p427111614307"></a>HTTP2功能的开启状态。</p>
<p id="p19203141843015"><a name="p19203141843015"></a><a name="p19203141843015"></a>取值范围： true/false。 true：开启。false：关闭。</p>
<p id="p1547317505556"><a name="p1547317505556"></a><a name="p1547317505556"></a>默认为false。</p>
<p id="p8409182313011"><a name="p8409182313011"></a><a name="p8409182313011"></a>仅针对监听器的协议为TERMINATED_HTTPS有意义。</p>
</td>
</tr>
<tr id="row57349363204"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p1874565118208"><a name="p1874565118208"></a><a name="p1874565118208"></a>default_pool_id</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p87451651142014"><a name="p87451651142014"></a><a name="p87451651142014"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p106111524173016"><a name="p106111524173016"></a><a name="p106111524173016"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p123367270306"><a name="p123367270306"></a><a name="p123367270306"></a>监听器的默认后端云服务器组ID。</p>
<p id="p95518286302"><a name="p95518286302"></a><a name="p95518286302"></a>当请求没有匹配的转发策略时，转发到默认后端云服务器上处理。当该字段为null时，表示监听器无默认的后端云服务器组。</p>
<div class="p" id="p0582785813"><a name="p0582785813"></a><a name="p0582785813"></a>default_pool_id有如下限制：<a name="ul7527145916134"></a><a name="ul7527145916134"></a><ul id="ul7527145916134"><li>不能更新为其他监听器的default_pool。</li><li>不能更新为其他监听器关联的转发策略所使用的pool。</li></ul>
</div>
<div class="p" id="p18499711086"><a name="p18499711086"></a><a name="p18499711086"></a>监听器和与之绑定的后端云服务器的对应关系如下：<a name="ul10547150145714"></a><a name="ul10547150145714"></a><ul id="ul10547150145714"><li>监听器的protocol为TCP时，后端云服务器组的protocol必须为TCP。</li><li>监听器的protocol为UDP时，后端云服务器组的protocol必须为UDP。</li><li>监听器的protocol为HTTP或TERMINATED_HTTPS时，后端云服务器组的protocol必须为HTTP。</li></ul>
</div>
</td>
</tr>
<tr id="row1172544022017"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p10745151172020"><a name="p10745151172020"></a><a name="p10745151172020"></a>default_tls_container_ref</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p1174685116203"><a name="p1174685116203"></a><a name="p1174685116203"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p1874515182018"><a name="p1874515182018"></a><a name="p1874515182018"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p18168203914301"><a name="p18168203914301"></a><a name="p18168203914301"></a>监听器使用的服务器证书ID。详细参见<a href="SSL证书管理-57.md">SSL证书管理</a>。</p>
<p id="p19265194233012"><a name="p19265194233012"></a><a name="p19265194233012"></a>当protocol参数为TERMINATED_HTTPS时，为必选字段。</p>
<p id="p1746719819484"><a name="p1746719819484"></a><a name="p1746719819484"></a>当protocol参数为非TERMINATED_HTTPS时，默认值：null。</p>
<p id="p4449744193317"><a name="p4449744193317"></a><a name="p4449744193317"></a>支持的最大字符长度：128</p>
<div class="note" id="zh-cn_topic_0096561541_note11703173412265"><a name="zh-cn_topic_0096561541_note11703173412265"></a><a name="zh-cn_topic_0096561541_note11703173412265"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="zh-cn_topic_0096561541_p1570312347262"><a name="zh-cn_topic_0096561541_p1570312347262"></a><a name="zh-cn_topic_0096561541_p1570312347262"></a>仅针对监听器的协议为TERMINATED_HTTPS有意义。</p>
</div></div>
</td>
</tr>
<tr id="row867712216579"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p53859232572"><a name="p53859232572"></a><a name="p53859232572"></a>client_ca_tls_container_ref</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p938542315573"><a name="p938542315573"></a><a name="p938542315573"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p7385223185710"><a name="p7385223185710"></a><a name="p7385223185710"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p1744120112011"><a name="p1744120112011"></a><a name="p1744120112011"></a>监听器使用的CA证书ID。详细参见<a href="SSL证书管理-57.md">SSL证书管理</a>。</p>
<p id="p16389354164819"><a name="p16389354164819"></a><a name="p16389354164819"></a>默认值：null</p>
<p id="p128121149183314"><a name="p128121149183314"></a><a name="p128121149183314"></a>支持的最大字符长度：128</p>
<div class="note" id="note886675314258"><a name="note886675314258"></a><a name="note886675314258"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p1986635311251"><a name="p1986635311251"></a><a name="p1986635311251"></a>仅针对监听器的协议为TERMINATED_HTTPS有意义。</p>
</div></div>
</td>
</tr>
<tr id="row1076020151219"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p157613020122"><a name="p157613020122"></a><a name="p157613020122"></a>sni_container_refs</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p976130161215"><a name="p976130161215"></a><a name="p976130161215"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p4761170191218"><a name="p4761170191218"></a><a name="p4761170191218"></a>Array</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p767224410308"><a name="p767224410308"></a><a name="p767224410308"></a>监听器使用的SNI证书（带域名的服务器证书）ID的列表。</p>
<p id="p18240124723012"><a name="p18240124723012"></a><a name="p18240124723012"></a>该字段不为空列表时，SNI特性开启。该字段为空列表时，SNI特性关闭。</p>
<p id="p3793414918"><a name="p3793414918"></a><a name="p3793414918"></a>默认值：[]</p>
<div class="note" id="note82991958102516"><a name="note82991958102516"></a><a name="note82991958102516"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p729995818255"><a name="p729995818255"></a><a name="p729995818255"></a>仅针对监听器的协议为TERMINATED_HTTPS有意义。</p>
</div></div>
</td>
</tr>
<tr id="row1531612302399"><td class="cellrowborder" valign="top" width="28.749999999999996%" headers="mcps1.2.5.1.1 "><p id="p47161232123910"><a name="p47161232123910"></a><a name="p47161232123910"></a>insert_headers</p>
</td>
<td class="cellrowborder" valign="top" width="14.06%" headers="mcps1.2.5.1.2 "><p id="p187161132143914"><a name="p187161132143914"></a><a name="p187161132143914"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.23%" headers="mcps1.2.5.1.3 "><p id="p7709539103018"><a name="p7709539103018"></a><a name="p7709539103018"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="44.96%" headers="mcps1.2.5.1.4 "><p id="p935210123452"><a name="p935210123452"></a><a name="p935210123452"></a>HTTP扩展头部，内部字段全量同步，不选则为默认值。</p>
<p id="p108041816154512"><a name="p108041816154512"></a><a name="p108041816154512"></a>可以将从负载均衡器到后端云服务器的路径中需要被后端云服务器用到的信息写入HTTP中，随报文传递到后端云服务器上。</p>
<p id="p162210572442"><a name="p162210572442"></a><a name="p162210572442"></a>例如可通过X-Forwarded-ELB-IP开关，将负载均衡器的弹性公网IP传到后端云服务器。详细参见<a href="#table179334816218">表4</a>。</p>
<div class="note" id="note6525195821113"><a name="note6525195821113"></a><a name="note6525195821113"></a><span class="notetitle"> 说明： </span><div class="notebody"><p id="p1052515816117"><a name="p1052515816117"></a><a name="p1052515816117"></a>仅当监听器的协议为HTTP、TERMINATED_HTTPS时，该字段有意义。</p>
</div></div>
</td>
</tr>
</tbody>
</table>

**表 4**  insert\_headers字段说明

<a name="table179334816218"></a>
<table><thead align="left"><tr id="row79341832118"><th class="cellrowborder" valign="top" width="28.599999999999998%" id="mcps1.2.5.1.1"><p id="p5997181818279"><a name="p5997181818279"></a><a name="p5997181818279"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="13.69%" id="mcps1.2.5.1.2"><p id="p0997131822717"><a name="p0997131822717"></a><a name="p0997131822717"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.4%" id="mcps1.2.5.1.3"><p id="p82861045162310"><a name="p82861045162310"></a><a name="p82861045162310"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="45.31%" id="mcps1.2.5.1.4"><p id="p1599781842716"><a name="p1599781842716"></a><a name="p1599781842716"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row189340814218"><td class="cellrowborder" valign="top" width="28.599999999999998%" headers="mcps1.2.5.1.1 "><p id="p1431962613264"><a name="p1431962613264"></a><a name="p1431962613264"></a>X-Forwarded-ELB-IP</p>
</td>
<td class="cellrowborder" valign="top" width="13.69%" headers="mcps1.2.5.1.2 "><p id="p1431992618268"><a name="p1431992618268"></a><a name="p1431992618268"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.4%" headers="mcps1.2.5.1.3 "><p id="p152871845132319"><a name="p152871845132319"></a><a name="p152871845132319"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="45.31%" headers="mcps1.2.5.1.4 "><p id="p1031942662610"><a name="p1031942662610"></a><a name="p1031942662610"></a>负载均衡器弹性公网IP透传开关。打开时可以将负载均衡器的弹性公网IP从报文的HTTP头中带到后端云服务器。</p>
<p id="p15500160161912"><a name="p15500160161912"></a><a name="p15500160161912"></a>取值范围： true/false。 true：开启。false：关闭。</p>
<p id="p1631913265261"><a name="p1631913265261"></a><a name="p1631913265261"></a>默认：关闭。</p>
</td>
</tr>
</tbody>
</table>

## 响应消息<a name="zh-cn_topic_0096561542_section1393614221812"></a>

**表 5**  响应参数

<a name="zh-cn_topic_0096561542_table89971153151815"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561542_row199855361813"><th class="cellrowborder" valign="top" width="21.349999999999998%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096561542_p599818535187"><a name="zh-cn_topic_0096561542_p599818535187"></a><a name="zh-cn_topic_0096561542_p599818535187"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="19.11%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096561542_p4998165315188"><a name="zh-cn_topic_0096561542_p4998165315188"></a><a name="zh-cn_topic_0096561542_p4998165315188"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="59.540000000000006%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096561542_p8998175331817"><a name="zh-cn_topic_0096561542_p8998175331817"></a><a name="zh-cn_topic_0096561542_p8998175331817"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096561542_row1599914530183"><td class="cellrowborder" valign="top" width="21.349999999999998%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p0999653151816"><a name="zh-cn_topic_0096561542_p0999653151816"></a><a name="zh-cn_topic_0096561542_p0999653151816"></a>listener</p>
</td>
<td class="cellrowborder" valign="top" width="19.11%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p3999165310187"><a name="zh-cn_topic_0096561542_p3999165310187"></a><a name="zh-cn_topic_0096561542_p3999165310187"></a>Object</p>
</td>
<td class="cellrowborder" valign="top" width="59.540000000000006%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p799915331810"><a name="zh-cn_topic_0096561542_p799915331810"></a><a name="zh-cn_topic_0096561542_p799915331810"></a>监听器对象。详见<a href="#zh-cn_topic_0096561542_table5301132505414">表6</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 6**  listeners字段说明

<a name="zh-cn_topic_0096561542_table5301132505414"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561542_row34671725195410"><th class="cellrowborder" valign="top" width="21.39%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096561542_p946792525418"><a name="zh-cn_topic_0096561542_p946792525418"></a><a name="zh-cn_topic_0096561542_p946792525418"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="18.98%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096561542_p8467142519541"><a name="zh-cn_topic_0096561542_p8467142519541"></a><a name="zh-cn_topic_0096561542_p8467142519541"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="59.63%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096561542_p104671125165411"><a name="zh-cn_topic_0096561542_p104671125165411"></a><a name="zh-cn_topic_0096561542_p104671125165411"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096561542_row12467122519549"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p8467425205419"><a name="zh-cn_topic_0096561542_p8467425205419"></a><a name="zh-cn_topic_0096561542_p8467425205419"></a>id</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="p378617517323"><a name="p378617517323"></a><a name="p378617517323"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p9467132535416"><a name="zh-cn_topic_0096561542_p9467132535416"></a><a name="zh-cn_topic_0096561542_p9467132535416"></a>监听器ID。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row124679252544"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p44682025175413"><a name="zh-cn_topic_0096561542_p44682025175413"></a><a name="zh-cn_topic_0096561542_p44682025175413"></a>tenant_id</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p146811253546"><a name="zh-cn_topic_0096561542_p146811253546"></a><a name="zh-cn_topic_0096561542_p146811253546"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p19468192515548"><a name="zh-cn_topic_0096561542_p19468192515548"></a><a name="zh-cn_topic_0096561542_p19468192515548"></a>监听器所在的项目ID。</p>
<p id="p8502175918331"><a name="p8502175918331"></a><a name="p8502175918331"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row2483115043412"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p9483950103413"><a name="zh-cn_topic_0096561542_p9483950103413"></a><a name="zh-cn_topic_0096561542_p9483950103413"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p11483750193410"><a name="zh-cn_topic_0096561542_p11483750193410"></a><a name="zh-cn_topic_0096561542_p11483750193410"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p148319504343"><a name="zh-cn_topic_0096561542_p148319504343"></a><a name="zh-cn_topic_0096561542_p148319504343"></a>监听器所在的项目ID。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row746816255547"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p184683251549"><a name="zh-cn_topic_0096561542_p184683251549"></a><a name="zh-cn_topic_0096561542_p184683251549"></a>name</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p1046842519548"><a name="zh-cn_topic_0096561542_p1046842519548"></a><a name="zh-cn_topic_0096561542_p1046842519548"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p44681425125418"><a name="zh-cn_topic_0096561542_p44681425125418"></a><a name="zh-cn_topic_0096561542_p44681425125418"></a>监听器名称。</p>
<p id="p9784922348"><a name="p9784922348"></a><a name="p9784922348"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row1046812512541"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p546862545411"><a name="zh-cn_topic_0096561542_p546862545411"></a><a name="zh-cn_topic_0096561542_p546862545411"></a>description</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p154685252543"><a name="zh-cn_topic_0096561542_p154685252543"></a><a name="zh-cn_topic_0096561542_p154685252543"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p14468172517540"><a name="zh-cn_topic_0096561542_p14468172517540"></a><a name="zh-cn_topic_0096561542_p14468172517540"></a>监听器描述信息。</p>
<p id="p089210443410"><a name="p089210443410"></a><a name="p089210443410"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row1046832595418"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p17468125125414"><a name="zh-cn_topic_0096561542_p17468125125414"></a><a name="zh-cn_topic_0096561542_p17468125125414"></a>protocol</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p746811255546"><a name="zh-cn_topic_0096561542_p746811255546"></a><a name="zh-cn_topic_0096561542_p746811255546"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p201601841193216"><a name="zh-cn_topic_0096561542_p201601841193216"></a><a name="zh-cn_topic_0096561542_p201601841193216"></a>监听器的监听协议。</p>
<p id="zh-cn_topic_0096561542_p0300344103218"><a name="zh-cn_topic_0096561542_p0300344103218"></a><a name="zh-cn_topic_0096561542_p0300344103218"></a>支持TCP、HTTP、UDP、TERMINATED_HTTPS。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row1346912520548"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p144691225205414"><a name="zh-cn_topic_0096561542_p144691225205414"></a><a name="zh-cn_topic_0096561542_p144691225205414"></a>protocol_port</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p446952515416"><a name="zh-cn_topic_0096561542_p446952515416"></a><a name="zh-cn_topic_0096561542_p446952515416"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p18323468323"><a name="zh-cn_topic_0096561542_p18323468323"></a><a name="zh-cn_topic_0096561542_p18323468323"></a>监听器的监听端口。</p>
<p id="zh-cn_topic_0096561542_p7688104743213"><a name="zh-cn_topic_0096561542_p7688104743213"></a><a name="zh-cn_topic_0096561542_p7688104743213"></a>取值范围：[1, 65535]。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row1546932511547"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p19469202585413"><a name="zh-cn_topic_0096561542_p19469202585413"></a><a name="zh-cn_topic_0096561542_p19469202585413"></a>loadbalancers</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p546911258548"><a name="zh-cn_topic_0096561542_p546911258548"></a><a name="zh-cn_topic_0096561542_p546911258548"></a>Array</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p16788191994017"><a name="zh-cn_topic_0096561542_p16788191994017"></a><a name="zh-cn_topic_0096561542_p16788191994017"></a>监听器关联的负载均衡器 ID。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row16469625125411"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p3469112575415"><a name="zh-cn_topic_0096561542_p3469112575415"></a><a name="zh-cn_topic_0096561542_p3469112575415"></a>connection_limit</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p144691725185411"><a name="zh-cn_topic_0096561542_p144691725185411"></a><a name="zh-cn_topic_0096561542_p144691725185411"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p636816504321"><a name="zh-cn_topic_0096561542_p636816504321"></a><a name="zh-cn_topic_0096561542_p636816504321"></a>监听器的最大连接数。</p>
<p id="zh-cn_topic_0096561542_p17992184321313"><a name="zh-cn_topic_0096561542_p17992184321313"></a><a name="zh-cn_topic_0096561542_p17992184321313"></a>取值范围：[-1, 2147483647]。默认为-1，无连接数限制。</p>
<p id="zh-cn_topic_0096561542_p8758551203215"><a name="zh-cn_topic_0096561542_p8758551203215"></a><a name="zh-cn_topic_0096561542_p8758551203215"></a>该字段为预留字段，暂未启动。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row44691325175419"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p446922525410"><a name="zh-cn_topic_0096561542_p446922525410"></a><a name="zh-cn_topic_0096561542_p446922525410"></a>admin_state_up</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p3469102512549"><a name="zh-cn_topic_0096561542_p3469102512549"></a><a name="zh-cn_topic_0096561542_p3469102512549"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p257371723315"><a name="zh-cn_topic_0096561542_p257371723315"></a><a name="zh-cn_topic_0096561542_p257371723315"></a>监听器的管理状态。</p>
<p id="zh-cn_topic_0096561542_p1316712043315"><a name="zh-cn_topic_0096561542_p1316712043315"></a><a name="zh-cn_topic_0096561542_p1316712043315"></a>该字段为预留字段，暂未启动。只支持设定为true。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row155261945821"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p149771721230"><a name="zh-cn_topic_0096561542_p149771721230"></a><a name="zh-cn_topic_0096561542_p149771721230"></a>http2_enable</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p149775217319"><a name="zh-cn_topic_0096561542_p149775217319"></a><a name="zh-cn_topic_0096561542_p149775217319"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p483792111330"><a name="zh-cn_topic_0096561542_p483792111330"></a><a name="zh-cn_topic_0096561542_p483792111330"></a>HTTP2功能的开启状态。</p>
<p id="zh-cn_topic_0096561542_p18870172411335"><a name="zh-cn_topic_0096561542_p18870172411335"></a><a name="zh-cn_topic_0096561542_p18870172411335"></a>取值范围： true/false。 true：开启。false：关闭。</p>
<p id="zh-cn_topic_0096561542_p3519192712331"><a name="zh-cn_topic_0096561542_p3519192712331"></a><a name="zh-cn_topic_0096561542_p3519192712331"></a>仅针对监听器的协议为TERMINATED_HTTPS有意义。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row1547012555419"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p20470112585411"><a name="zh-cn_topic_0096561542_p20470112585411"></a><a name="zh-cn_topic_0096561542_p20470112585411"></a>default_pool_id</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="p284315280323"><a name="p284315280323"></a><a name="p284315280323"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p3466142973313"><a name="zh-cn_topic_0096561542_p3466142973313"></a><a name="zh-cn_topic_0096561542_p3466142973313"></a>监听器的默认后端云服务器组ID。</p>
<p id="zh-cn_topic_0096561542_p149661432143316"><a name="zh-cn_topic_0096561542_p149661432143316"></a><a name="zh-cn_topic_0096561542_p149661432143316"></a>当请求没有匹配的转发策略时，转发到默认后端云服务器上处理。当该字段为null时，表示监听器无默认的后端云服务器组。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row94701258544"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p114701625185416"><a name="zh-cn_topic_0096561542_p114701625185416"></a><a name="zh-cn_topic_0096561542_p114701625185416"></a>default_tls_container_ref</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p194705259542"><a name="zh-cn_topic_0096561542_p194705259542"></a><a name="zh-cn_topic_0096561542_p194705259542"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p8103123513337"><a name="zh-cn_topic_0096561542_p8103123513337"></a><a name="zh-cn_topic_0096561542_p8103123513337"></a>监听器使用的服务器证书ID。详细参见<a href="SSL证书管理-57.md">SSL证书管理</a>。</p>
<p id="zh-cn_topic_0096561542_p15749173783317"><a name="zh-cn_topic_0096561542_p15749173783317"></a><a name="zh-cn_topic_0096561542_p15749173783317"></a>当protocol参数为TERMINATED_HTTPS时，为必选字段。</p>
<p id="p19457171212348"><a name="p19457171212348"></a><a name="p19457171212348"></a>支持的最大字符长度：128</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row174701325205420"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p347010254548"><a name="zh-cn_topic_0096561542_p347010254548"></a><a name="zh-cn_topic_0096561542_p347010254548"></a>client_ca_tls_container_ref</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p4470825185414"><a name="zh-cn_topic_0096561542_p4470825185414"></a><a name="zh-cn_topic_0096561542_p4470825185414"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="p99441416193416"><a name="p99441416193416"></a><a name="p99441416193416"></a>监听器使用的CA证书ID。</p>
<p id="p7248217143410"><a name="p7248217143410"></a><a name="p7248217143410"></a>支持的最大字符长度：128</p>
<p id="zh-cn_topic_0096561542_p1867105844415"><a name="zh-cn_topic_0096561542_p1867105844415"></a><a name="zh-cn_topic_0096561542_p1867105844415"></a>详细参见<a href="SSL证书管理-57.md">SSL证书管理</a>。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row1947122517545"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p1247117256543"><a name="zh-cn_topic_0096561542_p1247117256543"></a><a name="zh-cn_topic_0096561542_p1247117256543"></a>sni_container_refs</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p7471172515547"><a name="zh-cn_topic_0096561542_p7471172515547"></a><a name="zh-cn_topic_0096561542_p7471172515547"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p33961341163319"><a name="zh-cn_topic_0096561542_p33961341163319"></a><a name="zh-cn_topic_0096561542_p33961341163319"></a>监听器使用的SNI证书（带域名的服务器证书）ID的列表。</p>
<p id="zh-cn_topic_0096561542_p8259184619337"><a name="zh-cn_topic_0096561542_p8259184619337"></a><a name="zh-cn_topic_0096561542_p8259184619337"></a>该字段不为空列表时，SNI特性开启。该字段为空列表时，SNI特性关闭。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row18840123882117"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p38408381214"><a name="zh-cn_topic_0096561542_p38408381214"></a><a name="zh-cn_topic_0096561542_p38408381214"></a>tags</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p12840538162110"><a name="zh-cn_topic_0096561542_p12840538162110"></a><a name="zh-cn_topic_0096561542_p12840538162110"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p19840203842114"><a name="zh-cn_topic_0096561542_p19840203842114"></a><a name="zh-cn_topic_0096561542_p19840203842114"></a>监听器的标签。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row109815596568"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p18781627124910"><a name="zh-cn_topic_0096561542_p18781627124910"></a><a name="zh-cn_topic_0096561542_p18781627124910"></a>created_at</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p18781627204916"><a name="zh-cn_topic_0096561542_p18781627204916"></a><a name="zh-cn_topic_0096561542_p18781627204916"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p15848951122220"><a name="zh-cn_topic_0096561542_p15848951122220"></a><a name="zh-cn_topic_0096561542_p15848951122220"></a>监听器的创建时间。YYYY-MM-DDTHH:MM:SS</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row122703319572"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p1541843114495"><a name="zh-cn_topic_0096561542_p1541843114495"></a><a name="zh-cn_topic_0096561542_p1541843114495"></a>updated_at</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p1810172112506"><a name="zh-cn_topic_0096561542_p1810172112506"></a><a name="zh-cn_topic_0096561542_p1810172112506"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p341843144919"><a name="zh-cn_topic_0096561542_p341843144919"></a><a name="zh-cn_topic_0096561542_p341843144919"></a>监听器的更新时间。YYYY-MM-DDTHH:MM:SS</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561542_row1868281641415"><td class="cellrowborder" valign="top" width="21.39%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561542_p187757184142"><a name="zh-cn_topic_0096561542_p187757184142"></a><a name="zh-cn_topic_0096561542_p187757184142"></a>insert_headers</p>
</td>
<td class="cellrowborder" valign="top" width="18.98%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561542_p117752018191414"><a name="zh-cn_topic_0096561542_p117752018191414"></a><a name="zh-cn_topic_0096561542_p117752018191414"></a>Object</p>
</td>
<td class="cellrowborder" valign="top" width="59.63%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561542_p1299116124247"><a name="zh-cn_topic_0096561542_p1299116124247"></a><a name="zh-cn_topic_0096561542_p1299116124247"></a>HTTP扩展头部，内部字段全量同步，不选则为默认值。</p>
<p id="zh-cn_topic_0096561542_p2099315125249"><a name="zh-cn_topic_0096561542_p2099315125249"></a><a name="zh-cn_topic_0096561542_p2099315125249"></a>可以将从负载均衡器到后端云服务器的路径中需要被后端云服务器用到的信息写入HTTP中，随报文传递到后端云服务器上。</p>
<p id="zh-cn_topic_0096561542_p299781211242"><a name="zh-cn_topic_0096561542_p299781211242"></a><a name="zh-cn_topic_0096561542_p299781211242"></a>例如可通过X-Forwarded-ELB-IP开关，将负载均衡器的弹性公网IP传到后端云服务器。详细参见<a href="#table18237111183217">表7</a>。</p>
</td>
</tr>
</tbody>
</table>

**表 7**  insert\_headers字段说明

<a name="table18237111183217"></a>
<table><thead align="left"><tr id="zh-cn_topic_0141008280_row79341832118"><th class="cellrowborder" valign="top" width="28.599999999999998%" id="mcps1.2.5.1.1"><p id="zh-cn_topic_0141008280_p5997181818279"><a name="zh-cn_topic_0141008280_p5997181818279"></a><a name="zh-cn_topic_0141008280_p5997181818279"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="13.69%" id="mcps1.2.5.1.2"><p id="zh-cn_topic_0141008280_p0997131822717"><a name="zh-cn_topic_0141008280_p0997131822717"></a><a name="zh-cn_topic_0141008280_p0997131822717"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.4%" id="mcps1.2.5.1.3"><p id="zh-cn_topic_0141008280_p82861045162310"><a name="zh-cn_topic_0141008280_p82861045162310"></a><a name="zh-cn_topic_0141008280_p82861045162310"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="45.31%" id="mcps1.2.5.1.4"><p id="zh-cn_topic_0141008280_p1599781842716"><a name="zh-cn_topic_0141008280_p1599781842716"></a><a name="zh-cn_topic_0141008280_p1599781842716"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0141008280_row189340814218"><td class="cellrowborder" valign="top" width="28.599999999999998%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0141008280_p1431962613264"><a name="zh-cn_topic_0141008280_p1431962613264"></a><a name="zh-cn_topic_0141008280_p1431962613264"></a>X-Forwarded-ELB-IP</p>
</td>
<td class="cellrowborder" valign="top" width="13.69%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0141008280_p1431992618268"><a name="zh-cn_topic_0141008280_p1431992618268"></a><a name="zh-cn_topic_0141008280_p1431992618268"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.4%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0141008280_p152871845132319"><a name="zh-cn_topic_0141008280_p152871845132319"></a><a name="zh-cn_topic_0141008280_p152871845132319"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="45.31%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0141008280_p1031942662610"><a name="zh-cn_topic_0141008280_p1031942662610"></a><a name="zh-cn_topic_0141008280_p1031942662610"></a>负载均衡器弹性公网IP透传开关。打开时可以将负载均衡器的弹性公网IP从报文的HTTP头中带到后端云服务器。</p>
<p id="zh-cn_topic_0141008280_p15500160161912"><a name="zh-cn_topic_0141008280_p15500160161912"></a><a name="zh-cn_topic_0141008280_p15500160161912"></a>取值范围： true/false。 true：开启。false：关闭。</p>
<p id="zh-cn_topic_0141008280_p1631913265261"><a name="zh-cn_topic_0141008280_p1631913265261"></a><a name="zh-cn_topic_0141008280_p1631913265261"></a>默认：关闭。</p>
</td>
</tr>
</tbody>
</table>

## 示例<a name="section2053944317572"></a>

-   请求样例1 创建TCP监听器

    ```
    POST https://{Endpoint}/v2/145483a5107745e9b3d80f956713e6a3/elb/listeners
    
    {
        "listener": {
            "protocol_port": 80,
            "protocol": "TCP",
            "loadbalancer_id": "0416b6f1-877f-4a51-987e-978b3f084253",
            "name": "listener-test",
           
            "admin_state_up": true
            "insert_headers":{
                "X-Forwarded-ELB-IP":true,
               }
        }
    }
    ```


-   响应样例1

    ```
    {
        "listener": {
            "protocol_port": 80,
            "protocol": "TCP",
            "description": "",
            "client_ca_tls_container_ref": null,
            "default_tls_container_ref": null,
            "admin_state_up": true,
            "http2_enable": false,
            "loadbalancers": [
                {
                    "id": "0416b6f1-877f-4a51-987e-978b3f084253"
                }
            ],
            "tenant_id": "145483a5107745e9b3d80f956713e6a3",
            "project_id": "145483a5107745e9b3d80f956713e6a3",
            "sni_container_refs": [],
            "connection_limit": -1,
            "default_pool_id": null,
            "tags": [],
            "id": "b7f32b52-6f17-4b16-9ec8-063d71b653ce",
            "name": "listener-test",
            "created_at": "2018-07-25T01:54:13", 
            "updated_at": "2018-07-25T01:54:14"
            "insert_headers":{
                "X-Forwarded-ELB-IP":true,
              }
         }
    }
    ```


-   请求样例2 创建TERMINATED\_HTTPS类型的监听器

    ```
    POST https://{Endpoint}/v2/601240b9c5c94059b63d484c92cfe308/elb/listeners
    
    { 
        "listener": { 
            "protocol_port": 25, 
            "protocol": "TERMINATED_HTTPS", 
            "default_tls_container_ref": "02dcd56799e045bf8b131533cc911dd6",
            "loadbalancer_id": "0416b6f1-877f-4a51-987e-978b3f084253", 
            "name": "listener-test",
            "admin_state_up": true
            "insert_headers":{
                "X-Forwarded-ELB-IP":true,
              }
        } 
    }
    ```

-   响应样例2

    ```
    {
        "listener": {
            "insert_headers": {},
            "protocol_port": 25,
            "protocol": "TERMINATED_HTTPS",
            "description": "",
            "default_tls_container_ref": "02dcd56799e045bf8b131533cc911dd6",
            "sni_container_refs": [],
            "loadbalancers": [
                {
                    "id": "0416b6f1-877f-4a51-987e-978b3f084253"
                }
            ],
            "tenant_id": "601240b9c5c94059b63d484c92cfe308",
            "project_id": "601240b9c5c94059b63d484c92cfe308", 
            "created_at": "2019-01-21T12:38:31",
            "client_ca_tls_container_ref": null,
            "connection_limit": -1,
            "updated_at": "2019-01-21T12:38:31",
            "http2_enable": false,
            "admin_state_up": true,
            "default_pool_id": null,
            "id": "b56634cd-5ba8-460e-b5a2-6de5ba8eaf60",
            "tags": [],
            "name": "listener-test"
        }
    }
    ```

-   请求样例3 创建开启SNI的监听器

    ```
    POST https://{Endpoint}/v2/601240b9c5c94059b63d484c92cfe308/elb/listeners
    
    {
        "listener": {
            "protocol_port": 27, 
            "protocol": "TERMINATED_HTTPS", 
            "loadbalancer_id": "6bb85e33-4953-457a-85a9-336d76125b7b", 
            "name": "listener-test", 
            "admin_state_up": true,
            "default_tls_container_ref":"02dcd56799e045bf8b131533cc911dd6",
            "sni_container_refs": ["e15d1b5000474adca383c3cd9ddc06d4",
            	              "5882325fd6dd4b95a88d33238d293a0f"]
        }
    }
    ```

-   响应样例3

    ```
    {
        "listener": {
            "insert_headers": {},
            "protocol_port": 27,
            "protocol": "TERMINATED_HTTPS",
            "description": "",
            "default_tls_container_ref": "02dcd56799e045bf8b131533cc911dd6",
            "sni_container_refs": [
                "5882325fd6dd4b95a88d33238d293a0f",
                "e15d1b5000474adca383c3cd9ddc06d4"
            ],
            "loadbalancers": [
                {
                    "id": "6bb85e33-4953-457a-85a9-336d76125b7b"
                }
            ],
            "tenant_id": "601240b9c5c94059b63d484c92cfe308",
            "project_id": "601240b9c5c94059b63d484c92cfe308",
            "created_at": "2019-01-21T12:43:55",
             
            "client_ca_tls_container_ref": null,
            "connection_limit": -1,
            "updated_at": "2019-01-21T12:43:55",
            "http2_enable": false,
            "admin_state_up": true,
            "default_pool_id": null,
            "id": "b2cfda5b-52fe-4320-8845-34e8d4dac2c7",
            "tags": [],
            "name": "listener-test"
        }
    }
    ```


## 返回码<a name="zh-cn_topic_0096561542_zh-cn_topic_0049139642_section51272187"></a>

请参见[增强型负载均衡返回码说明](增强型负载均衡返回码说明.md)。

