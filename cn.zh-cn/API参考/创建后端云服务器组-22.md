# 创建后端云服务器组<a name="zh-cn_topic_0141008467"></a>

## 功能介绍<a name="zh-cn_topic_0096561549_section488813333155"></a>

创建后端云服务器组。将多个后端云服务器添加到后端云服务器组中后，请求会在后端云服务器间按后端云服务器组的负载均衡算法和后端云服务器的权重来做请求分发。

## URI<a name="zh-cn_topic_0096561549_section62303417159"></a>

POST /v2/\{project\_id\}/elb/pools

**表 1**  参数说明

<a name="zh-cn_topic_0096561532_table8859516183710"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561532_row1189415166379"><th class="cellrowborder" valign="top" width="23.46765323467653%" id="mcps1.2.5.1.1"><p id="zh-cn_topic_0096561532_p148945161379"><a name="zh-cn_topic_0096561532_p148945161379"></a><a name="zh-cn_topic_0096561532_p148945161379"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="17.348265173482652%" id="mcps1.2.5.1.2"><p id="zh-cn_topic_0096561532_p16894816103712"><a name="zh-cn_topic_0096561532_p16894816103712"></a><a name="zh-cn_topic_0096561532_p16894816103712"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="16.328367163283673%" id="mcps1.2.5.1.3"><p id="p1489131635413"><a name="p1489131635413"></a><a name="p1489131635413"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="42.85571442855714%" id="mcps1.2.5.1.4"><p id="zh-cn_topic_0096561532_p16894816113718"><a name="zh-cn_topic_0096561532_p16894816113718"></a><a name="zh-cn_topic_0096561532_p16894816113718"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="row1184910597469"><td class="cellrowborder" valign="top" width="23.46765323467653%" headers="mcps1.2.5.1.1 "><p id="p1989215461765"><a name="p1989215461765"></a><a name="p1989215461765"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="17.348265173482652%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0020100158_p557643211309"><a name="zh-cn_topic_0020100158_p557643211309"></a><a name="zh-cn_topic_0020100158_p557643211309"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="16.328367163283673%" headers="mcps1.2.5.1.3 "><p id="p8881716135414"><a name="p8881716135414"></a><a name="p8881716135414"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="42.85571442855714%" headers="mcps1.2.5.1.4 "><p id="p990674613615"><a name="p990674613615"></a><a name="p990674613615"></a>操作用户的项目ID。</p>
<p id="p8222164914610"><a name="p8222164914610"></a><a name="p8222164914610"></a>获取方法详见<a href="获取项目ID.md">获取项目ID</a>。</p>
</td>
</tr>
</tbody>
</table>

## 接口约束<a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_section52809326"></a>

-   指定session-persistence参数时，只有当type是APP\_COOKIE时，才可以设置cookie\_name。

## 请求消息<a name="zh-cn_topic_0096561549_section769952881520"></a>

**表 2**  请求参数

<a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_table36216906"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_row55337852"><th class="cellrowborder" valign="top" width="22.36223622362236%" id="mcps1.2.5.1.1"><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p53181042"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p53181042"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p53181042"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="10.16101610161016%" id="mcps1.2.5.1.2"><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p21836431"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p21836431"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p21836431"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="9.290929092909291%" id="mcps1.2.5.1.3"><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p12697152"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p12697152"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p12697152"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="58.185818581858186%" id="mcps1.2.5.1.4"><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p23920519"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p23920519"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p23920519"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_row58513871"><td class="cellrowborder" valign="top" width="22.36223622362236%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p42003087"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p42003087"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p42003087"></a>pool</p>
</td>
<td class="cellrowborder" valign="top" width="10.16101610161016%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p33262233"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p33262233"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p33262233"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="9.290929092909291%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p46806896"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p46806896"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p46806896"></a>Object</p>
</td>
<td class="cellrowborder" valign="top" width="58.185818581858186%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p9886387"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p9886387"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p9886387"></a>后端云服务器组对象。详见<a href="#zh-cn_topic_0096561549_table1263319159">表3</a></p>
</td>
</tr>
</tbody>
</table>

**表 3**  pool字段说明

<a name="zh-cn_topic_0096561549_table1263319159"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561549_row148461091857"><th class="cellrowborder" valign="top" width="24.21%" id="mcps1.2.5.1.1"><p id="zh-cn_topic_0096561549_p208461391457"><a name="zh-cn_topic_0096561549_p208461391457"></a><a name="zh-cn_topic_0096561549_p208461391457"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="15.479999999999999%" id="mcps1.2.5.1.2"><p id="zh-cn_topic_0096561549_p9846398519"><a name="zh-cn_topic_0096561549_p9846398519"></a><a name="zh-cn_topic_0096561549_p9846398519"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="11.72%" id="mcps1.2.5.1.3"><p id="zh-cn_topic_0096561549_p6846791456"><a name="zh-cn_topic_0096561549_p6846791456"></a><a name="zh-cn_topic_0096561549_p6846791456"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="48.59%" id="mcps1.2.5.1.4"><p id="zh-cn_topic_0096561549_p208465913515"><a name="zh-cn_topic_0096561549_p208465913515"></a><a name="zh-cn_topic_0096561549_p208465913515"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096561549_row1984619916516"><td class="cellrowborder" valign="top" width="24.21%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p88461695515"><a name="zh-cn_topic_0096561549_p88461695515"></a><a name="zh-cn_topic_0096561549_p88461695515"></a>tenant_id</p>
</td>
<td class="cellrowborder" valign="top" width="15.479999999999999%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p1084618910518"><a name="zh-cn_topic_0096561549_p1084618910518"></a><a name="zh-cn_topic_0096561549_p1084618910518"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="11.72%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p188466919514"><a name="zh-cn_topic_0096561549_p188466919514"></a><a name="zh-cn_topic_0096561549_p188466919514"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.59%" headers="mcps1.2.5.1.4 "><p id="p53019645115"><a name="p53019645115"></a><a name="p53019645115"></a>后端云服务器组所属的项目 ID。</p>
<p id="p6951021958"><a name="p6951021958"></a><a name="p6951021958"></a>获取方法详见<a href="获取项目ID.md">获取项目ID</a>。</p>
<p id="zh-cn_topic_0096561549_p11846891258"><a name="zh-cn_topic_0096561549_p11846891258"></a><a name="zh-cn_topic_0096561549_p11846891258"></a>需要和token中的project_id一致。</p>
<p id="p12970144423717"><a name="p12970144423717"></a><a name="p12970144423717"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row20846149157"><td class="cellrowborder" valign="top" width="24.21%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p284639456"><a name="zh-cn_topic_0096561549_p284639456"></a><a name="zh-cn_topic_0096561549_p284639456"></a>name</p>
</td>
<td class="cellrowborder" valign="top" width="15.479999999999999%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p6846189858"><a name="zh-cn_topic_0096561549_p6846189858"></a><a name="zh-cn_topic_0096561549_p6846189858"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="11.72%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p16846797514"><a name="zh-cn_topic_0096561549_p16846797514"></a><a name="zh-cn_topic_0096561549_p16846797514"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.59%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p208461591857"><a name="zh-cn_topic_0096561549_p208461591857"></a><a name="zh-cn_topic_0096561549_p208461591857"></a>后端云服务器组名称。</p>
<p id="p1468516542210"><a name="p1468516542210"></a><a name="p1468516542210"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row12847149652"><td class="cellrowborder" valign="top" width="24.21%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p884715912511"><a name="zh-cn_topic_0096561549_p884715912511"></a><a name="zh-cn_topic_0096561549_p884715912511"></a>description</p>
</td>
<td class="cellrowborder" valign="top" width="15.479999999999999%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p11847991259"><a name="zh-cn_topic_0096561549_p11847991259"></a><a name="zh-cn_topic_0096561549_p11847991259"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="11.72%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p48471091558"><a name="zh-cn_topic_0096561549_p48471091558"></a><a name="zh-cn_topic_0096561549_p48471091558"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.59%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p108472913513"><a name="zh-cn_topic_0096561549_p108472913513"></a><a name="zh-cn_topic_0096561549_p108472913513"></a>后端云服务器组的描述信息。</p>
<p id="p4867115612110"><a name="p4867115612110"></a><a name="p4867115612110"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row9847491854"><td class="cellrowborder" valign="top" width="24.21%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p1847159356"><a name="zh-cn_topic_0096561549_p1847159356"></a><a name="zh-cn_topic_0096561549_p1847159356"></a>protocol</p>
</td>
<td class="cellrowborder" valign="top" width="15.479999999999999%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p184759753"><a name="zh-cn_topic_0096561549_p184759753"></a><a name="zh-cn_topic_0096561549_p184759753"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="11.72%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p1984759551"><a name="zh-cn_topic_0096561549_p1984759551"></a><a name="zh-cn_topic_0096561549_p1984759551"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.59%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p121005279227"><a name="zh-cn_topic_0096561549_p121005279227"></a><a name="zh-cn_topic_0096561549_p121005279227"></a>后端云服务器组的后端协议。</p>
<p id="zh-cn_topic_0096561549_p187979311223"><a name="zh-cn_topic_0096561549_p187979311223"></a><a name="zh-cn_topic_0096561549_p187979311223"></a>支持TCP、UDP和HTTP。</p>
<p id="zh-cn_topic_0096561549_p109081234192220"><a name="zh-cn_topic_0096561549_p109081234192220"></a><a name="zh-cn_topic_0096561549_p109081234192220"></a>当指定listener_id创建后端云服务器组时，后端云服务器组的protocol和它关联的监听器的protocol有如下关系：</p>
<a name="zh-cn_topic_0096561549_ul118471640122214"></a><a name="zh-cn_topic_0096561549_ul118471640122214"></a><ul id="zh-cn_topic_0096561549_ul118471640122214"><li>监听器的protocol为UDP时，后端云服务器组的protocol必须为UDP；</li><li>监听器的protocol为TCP时，后端云服务器组的protocol必须为TCP；</li><li>监听器的protocol为HTTP或TERMINATED_HTTPS时，后端云服务器组的protocol必须为HTTP。</li></ul>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row8847191155"><td class="cellrowborder" valign="top" width="24.21%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p28471891959"><a name="zh-cn_topic_0096561549_p28471891959"></a><a name="zh-cn_topic_0096561549_p28471891959"></a>lb_algorithm</p>
</td>
<td class="cellrowborder" valign="top" width="15.479999999999999%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p2847491552"><a name="zh-cn_topic_0096561549_p2847491552"></a><a name="zh-cn_topic_0096561549_p2847491552"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="11.72%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p138471197510"><a name="zh-cn_topic_0096561549_p138471197510"></a><a name="zh-cn_topic_0096561549_p138471197510"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.59%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p14750174732220"><a name="zh-cn_topic_0096561549_p14750174732220"></a><a name="zh-cn_topic_0096561549_p14750174732220"></a>后端云服务器组的负载均衡算法。</p>
<div class="p" id="zh-cn_topic_0096561549_p197431549162210"><a name="zh-cn_topic_0096561549_p197431549162210"></a><a name="zh-cn_topic_0096561549_p197431549162210"></a>取值范围：<a name="zh-cn_topic_0096561549_ul142123811119"></a><a name="zh-cn_topic_0096561549_ul142123811119"></a><ul id="zh-cn_topic_0096561549_ul142123811119"><li>ROUND_ROBIN：加权轮询算法。</li><li>LEAST_CONNECTIONS：加权最少连接算法。</li><li>SOURCE_IP：源IP算法。</li></ul>
</div>
<p id="zh-cn_topic_0096561549_p45737526223"><a name="zh-cn_topic_0096561549_p45737526223"></a><a name="zh-cn_topic_0096561549_p45737526223"></a>当该字段的取值为SOURCE_IP时，后端云服务器组绑定的后端云服务器的weight字段无效。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row1184711916511"><td class="cellrowborder" valign="top" width="24.21%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p158471791356"><a name="zh-cn_topic_0096561549_p158471791356"></a><a name="zh-cn_topic_0096561549_p158471791356"></a>admin_state_up</p>
</td>
<td class="cellrowborder" valign="top" width="15.479999999999999%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p284779659"><a name="zh-cn_topic_0096561549_p284779659"></a><a name="zh-cn_topic_0096561549_p284779659"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="11.72%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p684710918519"><a name="zh-cn_topic_0096561549_p684710918519"></a><a name="zh-cn_topic_0096561549_p684710918519"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="48.59%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p1265335414227"><a name="zh-cn_topic_0096561549_p1265335414227"></a><a name="zh-cn_topic_0096561549_p1265335414227"></a>后端云服务器组的管理状态。</p>
<p id="zh-cn_topic_0096561549_p3794185692216"><a name="zh-cn_topic_0096561549_p3794185692216"></a><a name="zh-cn_topic_0096561549_p3794185692216"></a>该字段为预留字段，暂未启用。默认为true。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row28477917512"><td class="cellrowborder" valign="top" width="24.21%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p1484789054"><a name="zh-cn_topic_0096561549_p1484789054"></a><a name="zh-cn_topic_0096561549_p1484789054"></a>listener_id</p>
</td>
<td class="cellrowborder" valign="top" width="15.479999999999999%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p284718915510"><a name="zh-cn_topic_0096561549_p284718915510"></a><a name="zh-cn_topic_0096561549_p284718915510"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="11.72%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p584718917513"><a name="zh-cn_topic_0096561549_p584718917513"></a><a name="zh-cn_topic_0096561549_p584718917513"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.59%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p73704032312"><a name="zh-cn_topic_0096561549_p73704032312"></a><a name="zh-cn_topic_0096561549_p73704032312"></a>后端云服务器组关联的监听器的ID。</p>
<p id="zh-cn_topic_0096561549_p534811219232"><a name="zh-cn_topic_0096561549_p534811219232"></a><a name="zh-cn_topic_0096561549_p534811219232"></a>listener_id和loadbalancer_id中至少指定一个。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row7849191658"><td class="cellrowborder" valign="top" width="24.21%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p3849391351"><a name="zh-cn_topic_0096561549_p3849391351"></a><a name="zh-cn_topic_0096561549_p3849391351"></a>loadbalancer_id</p>
</td>
<td class="cellrowborder" valign="top" width="15.479999999999999%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p08491096510"><a name="zh-cn_topic_0096561549_p08491096510"></a><a name="zh-cn_topic_0096561549_p08491096510"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="11.72%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p138491290517"><a name="zh-cn_topic_0096561549_p138491290517"></a><a name="zh-cn_topic_0096561549_p138491290517"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="48.59%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p19931853231"><a name="zh-cn_topic_0096561549_p19931853231"></a><a name="zh-cn_topic_0096561549_p19931853231"></a>后端云服务器组关联的负载均衡器ID。</p>
<p id="zh-cn_topic_0096561549_p1489712782310"><a name="zh-cn_topic_0096561549_p1489712782310"></a><a name="zh-cn_topic_0096561549_p1489712782310"></a>listener_id和loadbalancer_id中至少指定一个。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row14849891059"><td class="cellrowborder" valign="top" width="24.21%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p158491098517"><a name="zh-cn_topic_0096561549_p158491098517"></a><a name="zh-cn_topic_0096561549_p158491098517"></a>session_persistence</p>
</td>
<td class="cellrowborder" valign="top" width="15.479999999999999%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p118491092053"><a name="zh-cn_topic_0096561549_p118491092053"></a><a name="zh-cn_topic_0096561549_p118491092053"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="11.72%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p884919555"><a name="zh-cn_topic_0096561549_p884919555"></a><a name="zh-cn_topic_0096561549_p884919555"></a>Object</p>
</td>
<td class="cellrowborder" valign="top" width="48.59%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p15990791234"><a name="zh-cn_topic_0096561549_p15990791234"></a><a name="zh-cn_topic_0096561549_p15990791234"></a>会话持久性。详细参见<a href="#zh-cn_topic_0096561549_table168044271458">表4</a>。</p>
<p id="zh-cn_topic_0096561549_p17157712162320"><a name="zh-cn_topic_0096561549_p17157712162320"></a><a name="zh-cn_topic_0096561549_p17157712162320"></a>取值为null时，表示会话保持关闭。</p>
</td>
</tr>
</tbody>
</table>

**表 4**  session\_persistence字段说明

<a name="zh-cn_topic_0096561549_table168044271458"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561549_row18875271455"><th class="cellrowborder" valign="top" width="25.147485251474855%" id="mcps1.2.5.1.1"><p id="zh-cn_topic_0096561549_p6887192711513"><a name="zh-cn_topic_0096561549_p6887192711513"></a><a name="zh-cn_topic_0096561549_p6887192711513"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="13.03869613038696%" id="mcps1.2.5.1.2"><p id="zh-cn_topic_0096561549_p198874276517"><a name="zh-cn_topic_0096561549_p198874276517"></a><a name="zh-cn_topic_0096561549_p198874276517"></a>是否必选</p>
</th>
<th class="cellrowborder" valign="top" width="12.568743125687432%" id="mcps1.2.5.1.3"><p id="zh-cn_topic_0096561549_p168878271513"><a name="zh-cn_topic_0096561549_p168878271513"></a><a name="zh-cn_topic_0096561549_p168878271513"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="49.24507549245076%" id="mcps1.2.5.1.4"><p id="zh-cn_topic_0096561549_p08872027454"><a name="zh-cn_topic_0096561549_p08872027454"></a><a name="zh-cn_topic_0096561549_p08872027454"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096561549_row588772720514"><td class="cellrowborder" valign="top" width="25.147485251474855%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p6887172711519"><a name="zh-cn_topic_0096561549_p6887172711519"></a><a name="zh-cn_topic_0096561549_p6887172711519"></a>type</p>
</td>
<td class="cellrowborder" valign="top" width="13.03869613038696%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p1688782715511"><a name="zh-cn_topic_0096561549_p1688782715511"></a><a name="zh-cn_topic_0096561549_p1688782715511"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="12.568743125687432%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p588710276512"><a name="zh-cn_topic_0096561549_p588710276512"></a><a name="zh-cn_topic_0096561549_p588710276512"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="49.24507549245076%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p19681233142510"><a name="zh-cn_topic_0096561549_p19681233142510"></a><a name="zh-cn_topic_0096561549_p19681233142510"></a>会话保持的类型。</p>
<div class="p" id="zh-cn_topic_0096561549_p297923402516"><a name="zh-cn_topic_0096561549_p297923402516"></a><a name="zh-cn_topic_0096561549_p297923402516"></a>取值范围：<a name="zh-cn_topic_0096561549_ul96910511656"></a><a name="zh-cn_topic_0096561549_ul96910511656"></a><ul id="zh-cn_topic_0096561549_ul96910511656"><li>SOURCE_IP：根据请求的源IP，将同一IP的请求发送到同一个后端云服务器上。</li><li>HTTP_COOKIE：客户端第一次发送请求时，负载均衡器自动生成cookie并将该cookie插入响应消息中，后续请求会发送到处理第一个请求的后端云服务器上。</li><li>APP_COOKIE：客户端第一次发送请求时，后端服务器生成cookie并将该cookie插入响应消息中，后续请求会发送到处理第一个请求的后端云服务器上。</li></ul>
</div>
<p id="zh-cn_topic_0096561549_p143821832101217"><a name="zh-cn_topic_0096561549_p143821832101217"></a><a name="zh-cn_topic_0096561549_p143821832101217"></a>当后端云服务器组的protocol为TCP时，只按SOURCE_IP生效；当后端云服务器组的protocol为HTTP时，只按HTTP_COOKIE、APP_COOKIE生效。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row1188716271451"><td class="cellrowborder" valign="top" width="25.147485251474855%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p158871927855"><a name="zh-cn_topic_0096561549_p158871927855"></a><a name="zh-cn_topic_0096561549_p158871927855"></a>cookie_name</p>
</td>
<td class="cellrowborder" valign="top" width="13.03869613038696%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p1288742719514"><a name="zh-cn_topic_0096561549_p1288742719514"></a><a name="zh-cn_topic_0096561549_p1288742719514"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.568743125687432%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p08876276516"><a name="zh-cn_topic_0096561549_p08876276516"></a><a name="zh-cn_topic_0096561549_p08876276516"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="49.24507549245076%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p74201830102516"><a name="zh-cn_topic_0096561549_p74201830102516"></a><a name="zh-cn_topic_0096561549_p74201830102516"></a>cookie名称。</p>
<p id="zh-cn_topic_0096561549_p47902276252"><a name="zh-cn_topic_0096561549_p47902276252"></a><a name="zh-cn_topic_0096561549_p47902276252"></a>当会话保持类型是APP_COOKIE时，为必选字段，其它类型时不可指定。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row5123330103411"><td class="cellrowborder" valign="top" width="25.147485251474855%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0096561549_p10835205182919"><a name="zh-cn_topic_0096561549_p10835205182919"></a><a name="zh-cn_topic_0096561549_p10835205182919"></a>persistence_timeout</p>
</td>
<td class="cellrowborder" valign="top" width="13.03869613038696%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0096561549_p3836195192911"><a name="zh-cn_topic_0096561549_p3836195192911"></a><a name="zh-cn_topic_0096561549_p3836195192911"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="12.568743125687432%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0096561549_p1883514502914"><a name="zh-cn_topic_0096561549_p1883514502914"></a><a name="zh-cn_topic_0096561549_p1883514502914"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="49.24507549245076%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0096561549_p79347431251"><a name="zh-cn_topic_0096561549_p79347431251"></a><a name="zh-cn_topic_0096561549_p79347431251"></a>会话保持的超时时间。</p>
<p id="zh-cn_topic_0096561549_p1865846122518"><a name="zh-cn_topic_0096561549_p1865846122518"></a><a name="zh-cn_topic_0096561549_p1865846122518"></a>当type为APP_COOKIE时不生效。</p>
<div class="p" id="zh-cn_topic_0096561549_p44301549162511"><a name="zh-cn_topic_0096561549_p44301549162511"></a><a name="zh-cn_topic_0096561549_p44301549162511"></a>取值范围：<a name="zh-cn_topic_0096561549_ul14784431191918"></a><a name="zh-cn_topic_0096561549_ul14784431191918"></a><ul id="zh-cn_topic_0096561549_ul14784431191918"><li>[1,60]（分钟）：当后端云服务器组的protocol为TCP、UDP时。</li><li>[1,1440]（分钟）：当后端云服务器组的protocol为HTTP时。</li></ul>
</div>
</td>
</tr>
</tbody>
</table>

## 响应消息<a name="zh-cn_topic_0096561549_section09871086161"></a>

**表 5**  响应参数

<a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_table26528280"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_row4346180"><th class="cellrowborder" valign="top" width="23.169999999999998%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p16496329"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p16496329"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p16496329"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="25.61%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p61134295"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p61134295"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p61134295"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="51.22%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p59539371"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p59539371"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p59539371"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_row57959746"><td class="cellrowborder" valign="top" width="23.169999999999998%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p64227841"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p64227841"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p64227841"></a>pool</p>
</td>
<td class="cellrowborder" valign="top" width="25.61%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p35072657"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p35072657"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p35072657"></a>Object</p>
</td>
<td class="cellrowborder" valign="top" width="51.22%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p62521411"><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p62521411"></a><a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_p62521411"></a>后端云服务器组对象。详见<a href="#zh-cn_topic_0096561549_table549816561954">表6</a></p>
</td>
</tr>
</tbody>
</table>

**表 6**  pools字段说明

<a name="zh-cn_topic_0096561549_table549816561954"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561549_row129412056850"><th class="cellrowborder" valign="top" width="27%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096561549_p8941556758"><a name="zh-cn_topic_0096561549_p8941556758"></a><a name="zh-cn_topic_0096561549_p8941556758"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="17.130000000000003%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096561549_p5941205616511"><a name="zh-cn_topic_0096561549_p5941205616511"></a><a name="zh-cn_topic_0096561549_p5941205616511"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="55.87%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096561549_p19941155610513"><a name="zh-cn_topic_0096561549_p19941155610513"></a><a name="zh-cn_topic_0096561549_p19941155610513"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096561549_row1994112561351"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p6941956051"><a name="zh-cn_topic_0096561549_p6941956051"></a><a name="zh-cn_topic_0096561549_p6941956051"></a>id</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p6395118132915"><a name="zh-cn_topic_0096561549_p6395118132915"></a><a name="zh-cn_topic_0096561549_p6395118132915"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p394185614510"><a name="zh-cn_topic_0096561549_p394185614510"></a><a name="zh-cn_topic_0096561549_p394185614510"></a>后端云服务器组 ID。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row694135617510"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p18941356653"><a name="zh-cn_topic_0096561549_p18941356653"></a><a name="zh-cn_topic_0096561549_p18941356653"></a>tenant_id</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p6942145615514"><a name="zh-cn_topic_0096561549_p6942145615514"></a><a name="zh-cn_topic_0096561549_p6942145615514"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p133818413522"><a name="zh-cn_topic_0096561549_p133818413522"></a><a name="zh-cn_topic_0096561549_p133818413522"></a>后端云服务器组所属的项目 ID。</p>
<p id="zh-cn_topic_0096561549_p17033816399"><a name="zh-cn_topic_0096561549_p17033816399"></a><a name="zh-cn_topic_0096561549_p17033816399"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row43961446125113"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p7487125685112"><a name="zh-cn_topic_0096561549_p7487125685112"></a><a name="zh-cn_topic_0096561549_p7487125685112"></a>project_id</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p1492135616515"><a name="zh-cn_topic_0096561549_p1492135616515"></a><a name="zh-cn_topic_0096561549_p1492135616515"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p234517425219"><a name="zh-cn_topic_0096561549_p234517425219"></a><a name="zh-cn_topic_0096561549_p234517425219"></a>后端云服务器组所属的项目 ID。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row189421561755"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p99422562513"><a name="zh-cn_topic_0096561549_p99422562513"></a><a name="zh-cn_topic_0096561549_p99422562513"></a>name</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p169421456857"><a name="zh-cn_topic_0096561549_p169421456857"></a><a name="zh-cn_topic_0096561549_p169421456857"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p894213562510"><a name="zh-cn_topic_0096561549_p894213562510"></a><a name="zh-cn_topic_0096561549_p894213562510"></a>后端云服务器组名称。</p>
<p id="zh-cn_topic_0096561549_p11736124214399"><a name="zh-cn_topic_0096561549_p11736124214399"></a><a name="zh-cn_topic_0096561549_p11736124214399"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row7942165615511"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p694235612516"><a name="zh-cn_topic_0096561549_p694235612516"></a><a name="zh-cn_topic_0096561549_p694235612516"></a>description</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p99423564514"><a name="zh-cn_topic_0096561549_p99423564514"></a><a name="zh-cn_topic_0096561549_p99423564514"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p17942115615520"><a name="zh-cn_topic_0096561549_p17942115615520"></a><a name="zh-cn_topic_0096561549_p17942115615520"></a>后端云服务器组的描述信息。</p>
<p id="zh-cn_topic_0096561549_p12272194573912"><a name="zh-cn_topic_0096561549_p12272194573912"></a><a name="zh-cn_topic_0096561549_p12272194573912"></a>支持的最大字符长度：255</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row6942115618510"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p129428561458"><a name="zh-cn_topic_0096561549_p129428561458"></a><a name="zh-cn_topic_0096561549_p129428561458"></a>protocol</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p209421556751"><a name="zh-cn_topic_0096561549_p209421556751"></a><a name="zh-cn_topic_0096561549_p209421556751"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p12345548148"><a name="zh-cn_topic_0096561549_p12345548148"></a><a name="zh-cn_topic_0096561549_p12345548148"></a>后端云服务器组的后端协议。</p>
<p id="zh-cn_topic_0096561549_p205871558161412"><a name="zh-cn_topic_0096561549_p205871558161412"></a><a name="zh-cn_topic_0096561549_p205871558161412"></a>取值范围：TCP、UDP和HTTP。</p>
<p id="zh-cn_topic_0096561549_p12123121610154"><a name="zh-cn_topic_0096561549_p12123121610154"></a><a name="zh-cn_topic_0096561549_p12123121610154"></a>当指定listener_id创建后端云服务器组时，后端云服务器组的protocol和它关联的监听器的protocol有如下关系：</p>
<a name="zh-cn_topic_0096561549_ul162192018201516"></a><a name="zh-cn_topic_0096561549_ul162192018201516"></a><ul id="zh-cn_topic_0096561549_ul162192018201516"><li>监听器的protocol为UDP时，后端云服务器组的protocol必须为UDP；</li><li>监听器的protocol为TCP时，后端云服务器组的protocol必须为TCP；</li><li>监听器的protocol为HTTP或TERMINATED_HTTPS时，后端云服务器组的protocol必须为HTTP。</li></ul>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row694235612512"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p199426561657"><a name="zh-cn_topic_0096561549_p199426561657"></a><a name="zh-cn_topic_0096561549_p199426561657"></a>lb_algorithm</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p149431356051"><a name="zh-cn_topic_0096561549_p149431356051"></a><a name="zh-cn_topic_0096561549_p149431356051"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p1190711287157"><a name="zh-cn_topic_0096561549_p1190711287157"></a><a name="zh-cn_topic_0096561549_p1190711287157"></a>后端云服务器组的负载均衡算法。</p>
<div class="p" id="zh-cn_topic_0096561549_p17447183017153"><a name="zh-cn_topic_0096561549_p17447183017153"></a><a name="zh-cn_topic_0096561549_p17447183017153"></a>取值范围：<a name="zh-cn_topic_0096561549_ul1064992814235"></a><a name="zh-cn_topic_0096561549_ul1064992814235"></a><ul id="zh-cn_topic_0096561549_ul1064992814235"><li>ROUND_ROBIN：加权轮询算法。</li><li>LEAST_CONNECTIONS：加权最少连接算法。</li><li>SOURCE_IP：源IP算法。当该字段的取值为SOURCE_IP时，后端云服务器组绑定的后端云服务器的weight字段无效。</li></ul>
</div>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row1194465616515"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p14944256556"><a name="zh-cn_topic_0096561549_p14944256556"></a><a name="zh-cn_topic_0096561549_p14944256556"></a>members</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p12944656151"><a name="zh-cn_topic_0096561549_p12944656151"></a><a name="zh-cn_topic_0096561549_p12944656151"></a>Array</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p139440561151"><a name="zh-cn_topic_0096561549_p139440561151"></a><a name="zh-cn_topic_0096561549_p139440561151"></a>后端云服务器组关联的后端云服务器ID的列表。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row159441356956"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p17944155618514"><a name="zh-cn_topic_0096561549_p17944155618514"></a><a name="zh-cn_topic_0096561549_p17944155618514"></a>healthmonitor_id</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p10245320142912"><a name="zh-cn_topic_0096561549_p10245320142912"></a><a name="zh-cn_topic_0096561549_p10245320142912"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p159441556659"><a name="zh-cn_topic_0096561549_p159441556659"></a><a name="zh-cn_topic_0096561549_p159441556659"></a>后端云服务器组关联的健康检查的ID。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row49441756554"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p1594419562516"><a name="zh-cn_topic_0096561549_p1594419562516"></a><a name="zh-cn_topic_0096561549_p1594419562516"></a>admin_state_up</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p5944135616511"><a name="zh-cn_topic_0096561549_p5944135616511"></a><a name="zh-cn_topic_0096561549_p5944135616511"></a>Boolean</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p114391647141511"><a name="zh-cn_topic_0096561549_p114391647141511"></a><a name="zh-cn_topic_0096561549_p114391647141511"></a>后端云服务器组的管理状态。</p>
<p id="zh-cn_topic_0096561549_p2458849201516"><a name="zh-cn_topic_0096561549_p2458849201516"></a><a name="zh-cn_topic_0096561549_p2458849201516"></a>该字段为预留字段，暂未启用。默认为true。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row0944135615511"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p15944165613512"><a name="zh-cn_topic_0096561549_p15944165613512"></a><a name="zh-cn_topic_0096561549_p15944165613512"></a>listeners</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p59448565512"><a name="zh-cn_topic_0096561549_p59448565512"></a><a name="zh-cn_topic_0096561549_p59448565512"></a>Array</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p12944125619511"><a name="zh-cn_topic_0096561549_p12944125619511"></a><a name="zh-cn_topic_0096561549_p12944125619511"></a>后端云服务器组关联的监听器ID列表。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row494419564513"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p594495614516"><a name="zh-cn_topic_0096561549_p594495614516"></a><a name="zh-cn_topic_0096561549_p594495614516"></a>loadbalancers</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p694413561519"><a name="zh-cn_topic_0096561549_p694413561519"></a><a name="zh-cn_topic_0096561549_p694413561519"></a>Array</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p189451656658"><a name="zh-cn_topic_0096561549_p189451656658"></a><a name="zh-cn_topic_0096561549_p189451656658"></a>后端云服务器组关联的负载均衡器ID列表。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row209451156154"><td class="cellrowborder" valign="top" width="27%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p16945185612516"><a name="zh-cn_topic_0096561549_p16945185612516"></a><a name="zh-cn_topic_0096561549_p16945185612516"></a>session_persistence</p>
</td>
<td class="cellrowborder" valign="top" width="17.130000000000003%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p109451564513"><a name="zh-cn_topic_0096561549_p109451564513"></a><a name="zh-cn_topic_0096561549_p109451564513"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="55.87%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p18458175215155"><a name="zh-cn_topic_0096561549_p18458175215155"></a><a name="zh-cn_topic_0096561549_p18458175215155"></a>后端云服务器组的会话持久性。详见<a href="#zh-cn_topic_0096561549_table1659974218492">表7</a>。</p>
<p id="zh-cn_topic_0096561549_p166781654171513"><a name="zh-cn_topic_0096561549_p166781654171513"></a><a name="zh-cn_topic_0096561549_p166781654171513"></a>当开启会话保持后，在一定时间内，来自同一客户端的请求会发送到同一个后端云服务器上。</p>
<p id="zh-cn_topic_0096561549_p19438135717159"><a name="zh-cn_topic_0096561549_p19438135717159"></a><a name="zh-cn_topic_0096561549_p19438135717159"></a>取值范围：当会话保持关闭时，该字段取值为null。</p>
</td>
</tr>
</tbody>
</table>

**表 7**  session\_persistence字段说明

<a name="zh-cn_topic_0096561549_table1659974218492"></a>
<table><thead align="left"><tr id="zh-cn_topic_0096561549_row12652114216495"><th class="cellrowborder" valign="top" width="30.34%" id="mcps1.2.4.1.1"><p id="zh-cn_topic_0096561549_p8652134218493"><a name="zh-cn_topic_0096561549_p8652134218493"></a><a name="zh-cn_topic_0096561549_p8652134218493"></a>参数</p>
</th>
<th class="cellrowborder" valign="top" width="20.22%" id="mcps1.2.4.1.2"><p id="zh-cn_topic_0096561549_p965284214496"><a name="zh-cn_topic_0096561549_p965284214496"></a><a name="zh-cn_topic_0096561549_p965284214496"></a>参数类型</p>
</th>
<th class="cellrowborder" valign="top" width="49.44%" id="mcps1.2.4.1.3"><p id="zh-cn_topic_0096561549_p3652164264914"><a name="zh-cn_topic_0096561549_p3652164264914"></a><a name="zh-cn_topic_0096561549_p3652164264914"></a>描述</p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0096561549_row16652114264914"><td class="cellrowborder" valign="top" width="30.34%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p106528426495"><a name="zh-cn_topic_0096561549_p106528426495"></a><a name="zh-cn_topic_0096561549_p106528426495"></a>type</p>
</td>
<td class="cellrowborder" valign="top" width="20.22%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p665216429491"><a name="zh-cn_topic_0096561549_p665216429491"></a><a name="zh-cn_topic_0096561549_p665216429491"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="49.44%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p1082720181618"><a name="zh-cn_topic_0096561549_p1082720181618"></a><a name="zh-cn_topic_0096561549_p1082720181618"></a>会话保持的类型。</p>
<div class="p" id="zh-cn_topic_0096561549_p79701533165"><a name="zh-cn_topic_0096561549_p79701533165"></a><a name="zh-cn_topic_0096561549_p79701533165"></a>取值范围：<a name="zh-cn_topic_0096561549_ul258091011289"></a><a name="zh-cn_topic_0096561549_ul258091011289"></a><ul id="zh-cn_topic_0096561549_ul258091011289"><li>SOURCE_IP：根据请求的源IP，将同一IP的请求发送到同一个后端云服务器上。</li><li>HTTP_COOKIE：客户端第一次发送请求时，负载均衡器自动生成cookie并将该cookie插入响应消息中，后续请求会发送到处理第一个请求的后端云服务器上。</li><li>APP_COOKIE：客户端第一次发送请求时，后端服务器生成cookie并将该cookie插入响应消息中，后续请求会发送到处理第一个请求的后端云服务器上。</li></ul>
</div>
<p id="zh-cn_topic_0096561549_p1382521641612"><a name="zh-cn_topic_0096561549_p1382521641612"></a><a name="zh-cn_topic_0096561549_p1382521641612"></a>当后端云服务器组的protocol为TCP时，只按SOURCE_IP生效；当后端云服务器组的protocol为HTTP时，只按HTTP_COOKIE、APP_COOKIE生效。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row765217429490"><td class="cellrowborder" valign="top" width="30.34%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p26521442114916"><a name="zh-cn_topic_0096561549_p26521442114916"></a><a name="zh-cn_topic_0096561549_p26521442114916"></a>cookie_name</p>
</td>
<td class="cellrowborder" valign="top" width="20.22%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p16653174214493"><a name="zh-cn_topic_0096561549_p16653174214493"></a><a name="zh-cn_topic_0096561549_p16653174214493"></a>String</p>
</td>
<td class="cellrowborder" valign="top" width="49.44%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p1184122312164"><a name="zh-cn_topic_0096561549_p1184122312164"></a><a name="zh-cn_topic_0096561549_p1184122312164"></a>cookie名称。</p>
<p id="zh-cn_topic_0096561549_p8672254169"><a name="zh-cn_topic_0096561549_p8672254169"></a><a name="zh-cn_topic_0096561549_p8672254169"></a>当会话保持类型是APP_COOKIE时，为必选字段，其它类型时不可指定。</p>
</td>
</tr>
<tr id="zh-cn_topic_0096561549_row268634152316"><td class="cellrowborder" valign="top" width="30.34%" headers="mcps1.2.4.1.1 "><p id="zh-cn_topic_0096561549_p1190604118422"><a name="zh-cn_topic_0096561549_p1190604118422"></a><a name="zh-cn_topic_0096561549_p1190604118422"></a>persistence_timeout</p>
</td>
<td class="cellrowborder" valign="top" width="20.22%" headers="mcps1.2.4.1.2 "><p id="zh-cn_topic_0096561549_p19102413425"><a name="zh-cn_topic_0096561549_p19102413425"></a><a name="zh-cn_topic_0096561549_p19102413425"></a>Integer</p>
</td>
<td class="cellrowborder" valign="top" width="49.44%" headers="mcps1.2.4.1.3 "><p id="zh-cn_topic_0096561549_p31964815179"><a name="zh-cn_topic_0096561549_p31964815179"></a><a name="zh-cn_topic_0096561549_p31964815179"></a>会话保持的超时时间。</p>
<p id="zh-cn_topic_0096561549_p18281115101717"><a name="zh-cn_topic_0096561549_p18281115101717"></a><a name="zh-cn_topic_0096561549_p18281115101717"></a>当type为APP_COOKIE时不生效。</p>
<a name="zh-cn_topic_0096561549_ul460616103285"></a><a name="zh-cn_topic_0096561549_ul460616103285"></a><ul id="zh-cn_topic_0096561549_ul460616103285"><li>取值范围：<a name="zh-cn_topic_0096561549_ul19618201052818"></a><a name="zh-cn_topic_0096561549_ul19618201052818"></a><ul id="zh-cn_topic_0096561549_ul19618201052818"><li>[1,60]（分钟）：当后端云服务器的protocol为TCP、UDP时。</li><li>[1,1440]（分钟）：当后端云服务器的protocol为HTTP时。</li></ul>
</li></ul>
</td>
</tr>
</tbody>
</table>

## 示例<a name="section88541956152817"></a>

-   请求样例1
    -   step1 请求样例 根据弹性云服务器id查询对应的subnet\_id和address，其中device\_id为弹性云服务器的id。取响应体中主网卡（primary\_interface为true的port）的subnet\_id、ip\_address。

        ```
        GET https://{VPCEndpoint}/v2.0/ports?device_id=f738c464-b5c2-45df-86c0-7f436620cd54
        ```

        step1 响应样例

        ```
        {
            "ports": [
                {
                    "id": "94971c39-46f0-443a-85e8-31cb7497c78e",
                    "name": "",
                    "status": "ACTIVE",
                    "admin_state_up": true,
                    "fixed_ips": [
                        {
                            "subnet_id": "33d8b01a-bbe6-41f4-bc45-78a1d284d503",
                            "ip_address": "192.168.44.11"
                        }
                    ],
                    "mac_address": "fa:16:3e:5c:d2:57",
                    "network_id": "1b76b9c2-9b7e-4ced-81bd-d13f7389d7c9",
                    "tenant_id": "04dd36f978800fe22f9bc00bea090736",
                    "project_id": "04dd36f978800fe22f9bc00bea090736",
                    "device_id": "f738c464-b5c2-45df-86c0-7f436620cd54",
                    "device_owner": "compute:cn-north-4a",
                    "security_groups": [
                        "a10dfc31-0055-4b84-b36e-1291b918125c",
                        "7a233393-5be2-4dff-8360-1558dd950f6e"
                    ],
                    "extra_dhcp_opts": [],
                    "allowed_address_pairs": [],
                    "binding:vnic_type": "normal",
                    "binding:vif_details": {
                        "primary_interface": true
                    },
                    "binding:profile": {},
                    "port_security_enabled": true,
                    "created_at": "2019-11-12T17:17:51",
                    "updated_at": "2019-11-12T17:17:51"
                }
            ]
        }
        ```

    -   step2 创建后端云服务器组，不开启会话保持

        ```
        POST https://{Endpoint}/v2/601240b9c5c94059b63d484c92cfe308/elb/pools
        
        {
            "pool": {
                "lb_algorithm":"ROUND_ROBIN",
                "loadbalancer_id": "63ad9dfe-4750-479f-9630-ada43ccc8117",
                "protocol":"HTTP"
            }
        }
        ```

    -   响应样例1

        ```
        {
            "pool": {
                "lb_algorithm": "ROUND_ROBIN",
                "protocol": "HTTP",
                "description": "",
                "admin_state_up": true,
                "loadbalancers": [
                    {
                        "id": "63ad9dfe-4750-479f-9630-ada43ccc8117"
                    }
                ],
                "tenant_id": "601240b9c5c94059b63d484c92cfe308",
                "project_id": "601240b9c5c94059b63d484c92cfe308",
                "session_persistence": null,
                "healthmonitor_id": null,
                "listeners": [],
                "members": [],
                "id": "4e496951-befb-47bf-9573-c1cd11825c07",
                "name": ""
            }
        }
        ```


-   请求样例2 创建后端云服务器组，并开启APP\_COOKIE类型的会话保持

    ```
    POST https://{Endpoint}/v2/145483a5107745e9b3d80f956713e6a3/elb/pools
    
    {
      "pool": {
        "lb_algorithm": "ROUND_ROBIN",
        "loadbalancer_id": "370fb112-e920-486a-b051-1d0d30704dd3",
        "protocol": "HTTP",
        "session_persistence": {
          "cookie_name": "my_cookie",
          "type": "APP_COOKIE",
          "persistence_timeout": 1
        },
        "admin_state_up": true
      }
    }
    ```


-   响应样例2

    ```
    {
      "pool": {
        "lb_algorithm": "ROUND_ROBIN",
        "protocol": "HTTP",
        "description": "",
        "admin_state_up": true,
        "loadbalancers": [
          {
            "id": "6b041b9e-976b-40ba-b075-375be6110b53"
          }
        ],
        "tenant_id": "145483a5107745e9b3d80f956713e6a3",
        "project_id": "145483a5107745e9b3d80f956713e6a3",
        "session_persistence": {
          "cookie_name": "my_cookie",
          "type": "APP_COOKIE",
          "persistence_timeout": 1
        },
        "healthmonitor_id": null,
        "listeners": [
          {
            "id": "370fb112-e920-486a-b051-1d0d30704dd3"
          }
        ],
        "members": [],
        "id": "307f8968-9474-4d0c-8434-66be09dabcc1",
        "name": ""
      }
    } 
    ```

-   请求样例3 创建HTTP后端云服务器组，并开启HTTP\_COOKIE类型的会话保持

    ```
    POST https://{Endpoint}/v2/601240b9c5c94059b63d484c92cfe308/elb/pools 
    
    {
        "pool": {
            "lb_algorithm":"ROUND_ROBIN",
            "loadbalancer_id": "63ad9dfe-4750-479f-9630-ada43ccc8117",
            "protocol":"HTTP",
            "session_persistence":{
            	"type":"HTTP_COOKIE"
            }
        }
    }
    ```

-   响应样例3

    ```
    {
        "pool": {
            "lb_algorithm": "ROUND_ROBIN",
            "protocol": "HTTP",
            "description": "",
            "admin_state_up": true,
            "loadbalancers": [
                {
                    "id": "63ad9dfe-4750-479f-9630-ada43ccc8117"
                }
            ],
            "tenant_id": "601240b9c5c94059b63d484c92cfe308",
            "project_id": "601240b9c5c94059b63d484c92cfe308",
            "session_persistence": {
                "persistence_timeout": 1440,
                "cookie_name": null,
                "type": "HTTP_COOKIE"
            },
            "healthmonitor_id": null,
            "listeners": [],
            "members": [],
            "id": "d46eab56-d76b-4cd3-8952-3c3c4cf113aa",
            "name": ""
        }
    }
    ```


## 返回码<a name="zh-cn_topic_0096561549_zh-cn_topic_0049139649_section57465365"></a>

请参见[增强型负载均衡返回码说明](增强型负载均衡返回码说明.md)。

