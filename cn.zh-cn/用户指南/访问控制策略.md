# 访问控制策略<a name="zh_cn_elb_03_0003"></a>

共享型和独享型负载均衡器用户可以通过添加白名单和黑名单的方式控制访问负载均衡监听器的IP。通过白名单能够设置允许特定IP访问，而其它IP不许访问。通过黑名单能够设置允许特定的IP不能访问，而其它IP允许访问。

>![](public_sys-resources/icon-notice.gif) **须知：** 
>-   设置白名单和黑名单是共享型和独享型负载均衡的功能，设置白名单和黑名单存在一定业务风险。一旦设置白名单，就只有白名单中的IP可以访问负载均衡监听器；一旦设置黑名单，黑名单中的IP不能访问负载均衡监听器。
>-   访问流量的IP先通过白名单或黑名单访问控制，然后负载均衡转发流量，通过安全组安全规则限制，所以安全组的规则设置是不会影响负载均衡的白名单或黑名单设置访问控制。
>-   访问控制只限制实际业务的流量转发，不限制ping命令操作，被限制的IP仍可以ping通后端服务器。
>    -   对于共享型负载均衡实例来说，需要创建监听器并添加后端云服务器，才可以ping通。
>    -   对于独享型负载均衡实例来说，创建完监听器，不需要添加后端云服务器，即可以ping通。
>-   配置了白名单，但是不在白名单的IP也能访问后端服务器，可能的原因是该连接为长连接。需要客户端或后端服务器断开该长连接。访问控制策略对新建的连接是实时生效的。

## 设置访问控制策略<a name="section109371640175915"></a>

1.  登录管理控制台。
2.  在管理控制台左上角单击![](figures/icon-region.png)图标，选择区域和项目。
3.  单击页面左上角的![](figures/icon-position.png)，选择“网络 \> 弹性负载均衡”。

1.  在“负载均衡器”界面，单击负载均衡名称，进入监听器管理界面。
2.  在需要添加访问控制策略的监听器基本信息页面，单击访问控制右侧“设置访问控制”按钮，如[表1](#table159371240125911)所示配置访问控制策略。

    **表 1**  访问控制参数说明

    <a name="table159371240125911"></a>
    <table><thead align="left"><tr id="row20937194017599"><th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.1"><p id="p159371240155912"><a name="p159371240155912"></a><a name="p159371240155912"></a>参数</p>
    </th>
    <th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.2"><p id="p179371740105912"><a name="p179371740105912"></a><a name="p179371740105912"></a>说明</p>
    </th>
    <th class="cellrowborder" valign="top" width="33.33333333333333%" id="mcps1.2.4.1.3"><p id="p10937104025916"><a name="p10937104025916"></a><a name="p10937104025916"></a>样例</p>
    </th>
    </tr>
    </thead>
    <tbody><tr id="row17641244188"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p1764152416188"><a name="p1764152416188"></a><a name="p1764152416188"></a>访问策略</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p571112817239"><a name="p571112817239"></a><a name="p571112817239"></a>可以选择允许所有IP访问、白名单和黑名单。</p>
    <a name="ul13289134512316"></a><a name="ul13289134512316"></a><ul id="ul13289134512316"><li>允许所有IP访问：不进行访问控制，允许所有IP访问负载均衡监听器。</li><li>白名单：仅允许IP地址组中的IP访问负载均衡监听器。</li><li>黑名单：不允许IP地址组中的IP访问负载均衡监听器。</li></ul>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p1476532421817"><a name="p1476532421817"></a><a name="p1476532421817"></a>黑名单</p>
    </td>
    </tr>
    <tr id="row484412181181"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p168451218151813"><a name="p168451218151813"></a><a name="p168451218151813"></a>IP地址组</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p1484541812184"><a name="p1484541812184"></a><a name="p1484541812184"></a>设置白名单或者黑名单时，必须选择一个IP地址组。如果还未创建IP地址组，需要先创建IP地址组，更多关于IP地址组的信息请参见<a href="IP地址组（黑名单-白名单）.md">IP地址组</a>。</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p11574181042917"><a name="p11574181042917"></a><a name="p11574181042917"></a>ipGroup-b2</p>
    </td>
    </tr>
    <tr id="row1993734018590"><td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.1 "><p id="p793754019597"><a name="p793754019597"></a><a name="p793754019597"></a>访问控制开关</p>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.2 "><p id="p967517492305"><a name="p967517492305"></a><a name="p967517492305"></a>当访问策略选择白名单或者黑名单时，可以开启或者关闭访问控制开关。</p>
    <a name="ul18937740125914"></a><a name="ul18937740125914"></a><ul id="ul18937740125914"><li>开启：开启访问控制开关，设置的白名单和黑名单才会生效。</li><li>关闭：关闭访问控制开关，设置的白名单和黑名单不生效。</li></ul>
    </td>
    <td class="cellrowborder" valign="top" width="33.33333333333333%" headers="mcps1.2.4.1.3 "><p id="p8938040105917"><a name="p8938040105917"></a><a name="p8938040105917"></a>-</p>
    </td>
    </tr>
    </tbody>
    </table>

3.  配置完成，点击“确定”。

